{% extends '@Extranet/base.html.twig' %}

{% block title %}
    Numérologie - {{ subject }}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}

    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/extranet/css/print.css') }}" media="print">
{% endblock %}

{% block navbar %}
    <hr class="sidebar-divider">

    <div class="sidebar-heading">
        Identité
    </div>

    <li class="nav-item">
        <a class="nav-link custom-tab-link active" href="#" data-target="tab1">
            <i class="fas fa-fw fa-user"></i>
            <span>Résumé identité</span>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link custom-tab-link" href="#" data-target="tab2">
            <i class="fas fa-fw fa-user"></i>
            <span>Calculs identité</span>
        </a>
    </li>

    <hr class="sidebar-divider">

    <div class="sidebar-heading">
        Lettres
    </div>

    <li class="nav-item">
        <a class="nav-link custom-tab-link" href="#" data-target="tab3">
            <i class="fas fa-fw fa-pencil-alt"></i>
            <span>Résumé lettres</span>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link custom-tab-link" href="#" data-target="tab4">
            <i class="fas fa-fw fa-pencil-alt"></i>
            <span>Calculs lettres</span>
        </a>
    </li>

    <hr class="sidebar-divider">

    <li class="nav-item">
        <a class="nav-link custom-tab-link" href="#" data-target="tab5">
            <i class="fas fa-fw fa-circle-notch"></i>
            <span>Vibrations de soutien</span>
        </a>
    </li>

    <hr class="sidebar-divider">

    <li class="nav-item">
        <a class="nav-link custom-tab-link" href="#" data-target="tab6">
            <i class="fas fa-fw fa-map-signs"></i>
            <span>Parcours de vie</span>
        </a>
    </li>
{% endblock navbar %}

{% block pagetitle %}
    {{ subject }}
{% endblock pagetitle %}

{% block pagesubtitle %}
    {% if subject.pseudos is not empty and subject.pseudos.0|default %}
        {{ subject.pseudos|join(', ') }}<br>
    {% endif %}
    <small>{{ subject.birthDate|localizeddate('long', 'short', 'fr') }}, {{ subject.birthPlace }} ({{ subject.data.geolocation|coordsToText }})</small>
{% endblock pagesubtitle %}

{% block callback_actions %}
    {% if subject.userId == app.user.id %}
        <a href="{{ path('extranet_edit', {'hash': subject.hash}) }}" title="Modifier" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">
            <i class="fas fa-pen fa-sm text-white-50"></i>&nbsp;
            Modifier
        </a>
    {% endif %}
    <a href="javascript:void(0);" data-toggle="modal" data-target="#triggerComparisonModal" title="Comparer avec une autre de vos études" class="d-none d-sm-inline-block btn btn-sm btn-warning shadow-sm">
        <i class="fas fa-not-equal fa-sm text-white-50"></i>&nbsp;
        Comparer
    </a>
    {% if subject.userId == app.user.id %}
        <a href="{{ path('extranet_delete', {'hash': subject.hash}) }}" title="Supprimer" class="d-none d-sm-inline-block btn btn-sm btn-danger shadow-sm">
            <i class="fas fa-times fa-sma hxt-white-50"></i>&nbsp;
            Supprimer
        </a>
    {% endif %}
    <a href="{{ path('site_export_pdf', {'hash': subject.hash}) }}" title="Télécharger pour imprimer" class="d-none d-sm-inline-block btn btn-sm btn-info shadow-sm">
        <i class="fas fa-print fa-sm text-white-50"></i>&nbsp;
        Télécharger pour imprimer
    </a>
{% endblock callback_actions %}

{% block body %}
    <div id="tab1" class="custom-tab">
        {% include '@Extranet/Analysis/_resume_identite.html.twig' with {'subject': subject} %}
    </div>
    <div id="tab2" class="custom-tab d-none">
        {% include '@Extranet/Analysis/_identite.html.twig' with {'subject': subject} %}
    </div>
    <div id="tab3" class="custom-tab d-none">
        {% include '@Extranet/Analysis/_resume_lettres.html.twig' with {'subject': subject} %}
    </div>
    <div id="tab4" class="custom-tab d-none">
        {% include '@Extranet/Analysis/_lettres.html.twig' with {'subject': subject} %}
    </div>
    <div id="tab5" class="custom-tab d-none">
        {% include '@Extranet/Analysis/_vibrations.html.twig' with {'subject': subject} %}
    </div>
    <div id="tab6" class="custom-tab d-none">
        {% include '@Extranet/Analysis/_parcours.html.twig' with {'subject': subject} %}
    </div>

    <div class="modal fade" id="triggerComparisonModal" tabindex="-1" role="dialog" aria-labelledby="triggerComparisonModalLabel" aria-hidden="true" data-hash="{{ subject.hash }}">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="triggerComparisonModalLabel">Comparer</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Chargement...</span>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}